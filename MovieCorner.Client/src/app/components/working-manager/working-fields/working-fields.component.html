<div id="frame">
  <div>
    <div class="header">
      <button mat-icon-button color="primary" (click)="openSettingsModal()">
        <mat-icon>settings</mat-icon>
      </button>
      <button mat-icon-button color="primary" (click)="redirectToThePrevDay()">
        <mat-icon>chevron_left</mat-icon>
      </button>
      <button mat-icon-button color="primary" (click)="redirectToTheNextDay()">
        <mat-icon>chevron_right</mat-icon>
      </button>
      <button
        mat-icon-button
        color="primary"
        *ngIf="workingDay !== null"
        (click)="openFieldModal(null)"
      >
        <mat-icon>add_box</mat-icon>
      </button>
      <button mat-icon-button color="primary">
        <mat-icon>save_alt</mat-icon>
      </button>
      <span class="spacer"></span>
      <h2 *ngIf="workingDay">
        {{ workingDay.startHour | leadZero }}:{{
          workingDay.startMin | leadZero
        }}
        - {{ workingDay.endHour | leadZero }}:{{
          workingDay.endMin | leadZero
        }}
        ({{ determinedLength }} h)
      </h2>
      <h2 *ngIf="workingDay === null">
        You don't have day settings for this day
      </h2>
    </div>
    <div *ngIf="workingDay !== null" class="mat-elevation-z8">
      <table mat-table [dataSource]="fieldList" matSort class="w-100">
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
          <td mat-cell *matCellDef="let row">
            {{ row.title }}
          </td>
          <td mat-footer-cell *matFooterCellDef>
            <strong>Total length</strong>
          </td>
        </ng-container>

        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Description</th>
          <td mat-cell *matCellDef="let row">{{ row.description }}</td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="length">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Length (h)</th>
          <td mat-cell *matCellDef="let row">{{ row.length }}</td>
          <td
            mat-footer-cell
            *matFooterCellDef
            [ngClass]="{
              correct: totalLength == determinedLength,
              incorrect: totalLength < determinedLength
            }"
          >
            <strong>{{ totalLength }}</strong>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          (click)="openFieldModal(row)"
        ></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
      </table>
    </div>
  </div>
</div>
