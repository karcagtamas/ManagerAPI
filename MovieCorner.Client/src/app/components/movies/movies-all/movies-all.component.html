<div>
  <div>
    <button mat-icon-button color="primary" (click)="create()">
      <mat-icon>add_box</mat-icon>
    </button>
  </div>
  <mat-form-field>
    <input
      matInput
      (keyup)="filter()"
      [(ngModel)]="filterValue"
      name="filter"
      placeholder="Filter"
    />
  </mat-form-field>
  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
        <td mat-cell *matCellDef="let row">{{ row.title }}</td>
      </ng-container>

      <ng-container matColumnDef="year">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Year</th>
        <td mat-cell *matCellDef="let row">{{ row.year }}</td>
      </ng-container>

      <ng-container matColumnDef="creater">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Creater</th>
        <td mat-cell *matCellDef="let row">{{ row.creater }}</td>
      </ng-container>

      <ng-container matColumnDef="expanded">
        <td
          mat-cell
          *matCellDef="let row"
          [attr.colspan]="displayedColumns.length"
        >
          <div
            class="detail"
            [@detailExpand]="row == expanded ? 'expanded' : 'collapsed'"
          >
            <div class="detail-content">
              <div>
                <strong>Description: </strong>
                {{ row.description | description }}
              </div>
              <span class="spacer"></span>
              <div>
                <button
                  mat-icon-button
                  color="primary"
                  (click)="update(row.id)"
                >
                  <mat-icon>create</mat-icon>
                </button>

                <button mat-icon-button color="primary" (click)="delete(row)">
                  <mat-icon>clear</mat-icon>
                </button>
              </div>
            </div>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        class="element-row"
        [class.expanded-row]="expanded === row"
        (click)="expanded = expanded === row ? null : row"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: ['expanded']"
        class="detail-row"
      ></tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[10, 20]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
