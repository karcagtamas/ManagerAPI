<div>
  <div>
    <button mat-icon-button color="primary" (click)="create()">
      <mat-icon>add_box</mat-icon>
    </button>
  </div>
  <mat-form-field>
    <input
      matInput
      (keyup)="filter()"
      [(ngModel)]="filterValue"
      name="filter"
      placeholder="Filter"
    />
  </mat-form-field>
  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
        <td mat-cell *matCellDef="let row">{{ row.title }}</td>
      </ng-container>

      <ng-container matColumnDef="startYear">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Start Year</th>
        <td mat-cell *matCellDef="let row">{{ row.startYear }}</td>
      </ng-container>

      <ng-container matColumnDef="endYear">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>End Year</th>
        <td mat-cell *matCellDef="let row">{{ row.endYear }}</td>
      </ng-container>

      <ng-container matColumnDef="creater">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Creater</th>
        <td mat-cell *matCellDef="let row">{{ row.creater }}</td>
      </ng-container>

      <ng-container matColumnDef="creationTime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Creation Time</th>
        <td mat-cell *matCellDef="let row">
          {{ row.creationTime | date: 'yyyy. MM. dd. HH:mm:ss' }}
        </td>
      </ng-container>

      <ng-container matColumnDef="countOfSeasons">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Count of Seasons
        </th>
        <td mat-cell *matCellDef="let row">{{ row.seasons.length }}</td>
      </ng-container>

      <ng-container matColumnDef="expanded">
        <td
          mat-cell
          *matCellDef="let row"
          [attr.colspan]="displayedColumns.length"
        >
          <div
            class="detail"
            [@detailExpand]="row == expanded ? 'expanded' : 'collapsed'"
          >
            <div class="detail-content">
              <ks-season-table
                class="w-100"
                [source]="row.seasons"
              ></ks-season-table>
            </div>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        class="element-row"
        [class.expanded-row]="expanded === row"
        (click)="expanded = expanded === row ? null : row"
      ></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: ['expanded']"
        class="detail-row"
      ></tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[10, 20]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
